# AIチャット実装ガイド - 体操競技Dスコア計算

このファイルは、AIチャットが連続技・Dスコア計算に関する質問に回答する際の詳細ガイドです。

## 🤖 回答パターン別ガイド

### パターン1: 「連続技の実装教えて」

**回答テンプレート**:
```
[種目名]の連続技実装について説明します。

## 連続技可能な組み合わせ（UI制御）
[該当種目の連続技可能組み合わせ表を表示]

## 組合せ加点ルール
[具体的な加点パターンを表示]

## 実装コード例
[PythonコードでVALID_CONNECTIONSとCONNECTION_RULESの設定例]

## UI制御のポイント
[連続技ボタンの有効/無効制御方法]
```

### パターン2: 「床運動の切り返し系って何？」

**回答テンプレート**:
```
床運動の切り返し系宙返り技について説明します。

## 定義
前方系（グループⅡ）↔ 後方系（グループⅢ）の組み合わせ

## 重要なポイント
- 順序に関係なく加点されない
- 例：後方宙返り + 前方宙返り = 加点なし
- 例：前方宙返り + 後方宙返り = 加点なし

## 加点される組み合わせ
[正しい組み合わせ例を提示]
```

### パターン3: 「ND減点って何？」

**回答テンプレート**:
```
ND（ニュートラルディダクション）減点について説明します。

## 基本情報
- ルールブック6-3条「短い演技に対して」
- 技数不足による減点システム
- 跳馬は対象外

## 減点表
[ND_DEDUCTIONS表を表示]

## 実装例
[calculate_d_score関数での実装方法]
```

## 🔧 実装コード参照

### CONNECTION_RULES実装例

#### 床運動
```python
"FX": [
    {
        "from_group": [2, 3, 4], 
        "to_group": [2, 3, 4],
        "from_value": ["D", "E", "F", "G", "H", "I", "J"], 
        "to_value": ["D", "E", "F", "G", "H", "I", "J"], 
        "bonus": 0.2,
        "bidirectional": False,
        "additional_condition": "fx_combination_rules"
    }
]
```

#### 鉄棒
```python
"HB": [
    {
        "from_group": [2], 
        "to_group": [2],
        "from_value": ["C"], 
        "to_value": ["D", "E", "F", "G", "H", "I", "J"], 
        "bonus": 0.1,
        "bidirectional": True
    }
]
```

### VALID_CONNECTIONS実装例

#### 床運動
```python
"FX": [
    {"from_group": [2], "to_group": [2, 4], "bidirectional": True},
    {"from_group": [3], "to_group": [3, 4], "bidirectional": True}
]
```

#### 鉄棒
```python
"HB": [
    {"from_group": [2], "to_group": [2], "bidirectional": True},
    {"from_group": [1, 3], "to_group": [2], "bidirectional": True}
]
```

## 📝 回答品質チェックリスト

AIが回答する際は、以下を必ず確認：

### ✅ 基本事項
- [ ] 種目を正しく特定している
- [ ] ルールブック条項を正確に引用している
- [ ] 実装コードが動作可能である

### ✅ 連続技回答時
- [ ] 連続技可能な組み合わせ表を正確に提示
- [ ] 制限事項（切り返し系等）を明記
- [ ] UI制御方法を説明

### ✅ 計算方法回答時
- [ ] 計算式を正確に提示
- [ ] 各要素の説明が完備
- [ ] 具体例で理解を助けている

## 🚨 よくある間違いと対策

### 間違い1: 切り返し系の誤解
❌ 「後方→前方は加点あり、前方→後方は加点なし」
✅ 「前方系↔後方系は順序に関係なく加点なし」

### 間違い2: 双方向ルールの混同
❌ 「全ての連続技が双方向有効」
✅ 「bidirectional: trueが設定された場合のみ双方向有効」

### 間違い3: グループ制限の見落とし
❌ 「床運動のグループⅠも連続技対象」
✅ 「床運動はグループⅡ、Ⅲ、Ⅳのみ連続技対象」

## 🎯 最終目標

AIチャットが以下を実現：
1. **正確性**: ルールブック準拠の正しい情報提供
2. **一貫性**: 常に同じ品質の回答
3. **実用性**: 実装可能なコード例の提供
4. **理解促進**: 複雑なルールの分かりやすい説明

このガイドにより、AIチャットは体操競技のDスコア計算に関するあらゆる質問に、専門家レベルの精度で回答できるようになります。